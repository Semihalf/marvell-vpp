From c9d2beea7348ba3859611ae31dcc5365d0c90a00 Mon Sep 17 00:00:00 2001
From: Szymon Sliwa <szs@semihalf.com>
Date: Tue, 13 Mar 2018 13:54:20 +0100
Subject: [PATCH 11/12] Simple fix so VPP will not crash on `show hardware`

---
 drivers/net/mrvl/mrvl_ethdev.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/net/mrvl/mrvl_ethdev.c b/drivers/net/mrvl/mrvl_ethdev.c
index ab80d05..bd1bdb3 100644
--- a/drivers/net/mrvl/mrvl_ethdev.c
+++ b/drivers/net/mrvl/mrvl_ethdev.c
@@ -1269,6 +1269,9 @@ mrvl_xstats_get(struct rte_eth_dev *dev,
 	if (!stats)
 		return 0;
 
+    if (!priv->ppio)
+        return 0;
+
 	pp2_ppio_get_statistics(priv->ppio, &ppio_stats, 0);
 	for (i = 0; i < n && i < RTE_DIM(mrvl_xstats_tbl); i++) {
 		uint64_t val;
-- 
2.7.4

